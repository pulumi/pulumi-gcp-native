// *** WARNING: this file was generated by the Pulumi SDK Generator. ***
// *** Do not edit by hand unless you're certain you know what you are doing! ***

package v1

import (
	"context"
	"reflect"

	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
)

// Gets the state of a Cloud Spanner database.
func LookupDatabase(ctx *pulumi.Context, args *LookupDatabaseArgs, opts ...pulumi.InvokeOption) (*LookupDatabaseResult, error) {
	var rv LookupDatabaseResult
	err := ctx.Invoke("google-native:spanner/v1:getDatabase", args, &rv, opts...)
	if err != nil {
		return nil, err
	}
	return &rv, nil
}

type LookupDatabaseArgs struct {
	DatabaseId string  `pulumi:"databaseId"`
	InstanceId string  `pulumi:"instanceId"`
	Project    *string `pulumi:"project"`
}

type LookupDatabaseResult struct {
	// If exists, the time at which the database creation started.
	CreateTime string `pulumi:"createTime"`
	// The dialect of the Cloud Spanner Database.
	DatabaseDialect string `pulumi:"databaseDialect"`
	// The read-write region which contains the database's leader replicas. This is the same as the value of default_leader database option set using DatabaseAdmin.CreateDatabase or DatabaseAdmin.UpdateDatabaseDdl. If not explicitly set, this is empty.
	DefaultLeader string `pulumi:"defaultLeader"`
	// Earliest timestamp at which older versions of the data can be read. This value is continuously updated by Cloud Spanner and becomes stale the moment it is queried. If you are using this value to recover data, make sure to account for the time from the moment when the value is queried to the moment when you initiate the recovery.
	EarliestVersionTime string `pulumi:"earliestVersionTime"`
	// For databases that are using customer managed encryption, this field contains the encryption configuration for the database. For databases that are using Google default or other types of encryption, this field is empty.
	EncryptionConfig EncryptionConfigResponse `pulumi:"encryptionConfig"`
	// For databases that are using customer managed encryption, this field contains the encryption information for the database, such as encryption state and the Cloud KMS key versions that are in use. For databases that are using Google default or other types of encryption, this field is empty. This field is propagated lazily from the backend. There might be a delay from when a key version is being used and when it appears in this field.
	EncryptionInfo []EncryptionInfoResponse `pulumi:"encryptionInfo"`
	// The name of the database. Values are of the form `projects//instances//databases/`, where `` is as specified in the `CREATE DATABASE` statement. This name can be passed to other API methods to identify the database.
	Name string `pulumi:"name"`
	// Applicable only for restored databases. Contains information about the restore source.
	RestoreInfo RestoreInfoResponse `pulumi:"restoreInfo"`
	// The current database state.
	State string `pulumi:"state"`
	// The period in which Cloud Spanner retains all versions of data for the database. This is the same as the value of version_retention_period database option set using UpdateDatabaseDdl. Defaults to 1 hour, if not set.
	VersionRetentionPeriod string `pulumi:"versionRetentionPeriod"`
}

func LookupDatabaseOutput(ctx *pulumi.Context, args LookupDatabaseOutputArgs, opts ...pulumi.InvokeOption) LookupDatabaseResultOutput {
	return pulumi.ToOutputWithContext(context.Background(), args).
		ApplyT(func(v interface{}) (LookupDatabaseResult, error) {
			args := v.(LookupDatabaseArgs)
			r, err := LookupDatabase(ctx, &args, opts...)
			return *r, err
		}).(LookupDatabaseResultOutput)
}

type LookupDatabaseOutputArgs struct {
	DatabaseId pulumi.StringInput    `pulumi:"databaseId"`
	InstanceId pulumi.StringInput    `pulumi:"instanceId"`
	Project    pulumi.StringPtrInput `pulumi:"project"`
}

func (LookupDatabaseOutputArgs) ElementType() reflect.Type {
	return reflect.TypeOf((*LookupDatabaseArgs)(nil)).Elem()
}

type LookupDatabaseResultOutput struct{ *pulumi.OutputState }

func (LookupDatabaseResultOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*LookupDatabaseResult)(nil)).Elem()
}

func (o LookupDatabaseResultOutput) ToLookupDatabaseResultOutput() LookupDatabaseResultOutput {
	return o
}

func (o LookupDatabaseResultOutput) ToLookupDatabaseResultOutputWithContext(ctx context.Context) LookupDatabaseResultOutput {
	return o
}

// If exists, the time at which the database creation started.
func (o LookupDatabaseResultOutput) CreateTime() pulumi.StringOutput {
	return o.ApplyT(func(v LookupDatabaseResult) string { return v.CreateTime }).(pulumi.StringOutput)
}

// The dialect of the Cloud Spanner Database.
func (o LookupDatabaseResultOutput) DatabaseDialect() pulumi.StringOutput {
	return o.ApplyT(func(v LookupDatabaseResult) string { return v.DatabaseDialect }).(pulumi.StringOutput)
}

// The read-write region which contains the database's leader replicas. This is the same as the value of default_leader database option set using DatabaseAdmin.CreateDatabase or DatabaseAdmin.UpdateDatabaseDdl. If not explicitly set, this is empty.
func (o LookupDatabaseResultOutput) DefaultLeader() pulumi.StringOutput {
	return o.ApplyT(func(v LookupDatabaseResult) string { return v.DefaultLeader }).(pulumi.StringOutput)
}

// Earliest timestamp at which older versions of the data can be read. This value is continuously updated by Cloud Spanner and becomes stale the moment it is queried. If you are using this value to recover data, make sure to account for the time from the moment when the value is queried to the moment when you initiate the recovery.
func (o LookupDatabaseResultOutput) EarliestVersionTime() pulumi.StringOutput {
	return o.ApplyT(func(v LookupDatabaseResult) string { return v.EarliestVersionTime }).(pulumi.StringOutput)
}

// For databases that are using customer managed encryption, this field contains the encryption configuration for the database. For databases that are using Google default or other types of encryption, this field is empty.
func (o LookupDatabaseResultOutput) EncryptionConfig() EncryptionConfigResponseOutput {
	return o.ApplyT(func(v LookupDatabaseResult) EncryptionConfigResponse { return v.EncryptionConfig }).(EncryptionConfigResponseOutput)
}

// For databases that are using customer managed encryption, this field contains the encryption information for the database, such as encryption state and the Cloud KMS key versions that are in use. For databases that are using Google default or other types of encryption, this field is empty. This field is propagated lazily from the backend. There might be a delay from when a key version is being used and when it appears in this field.
func (o LookupDatabaseResultOutput) EncryptionInfo() EncryptionInfoResponseArrayOutput {
	return o.ApplyT(func(v LookupDatabaseResult) []EncryptionInfoResponse { return v.EncryptionInfo }).(EncryptionInfoResponseArrayOutput)
}

// The name of the database. Values are of the form `projects//instances//databases/`, where `` is as specified in the `CREATE DATABASE` statement. This name can be passed to other API methods to identify the database.
func (o LookupDatabaseResultOutput) Name() pulumi.StringOutput {
	return o.ApplyT(func(v LookupDatabaseResult) string { return v.Name }).(pulumi.StringOutput)
}

// Applicable only for restored databases. Contains information about the restore source.
func (o LookupDatabaseResultOutput) RestoreInfo() RestoreInfoResponseOutput {
	return o.ApplyT(func(v LookupDatabaseResult) RestoreInfoResponse { return v.RestoreInfo }).(RestoreInfoResponseOutput)
}

// The current database state.
func (o LookupDatabaseResultOutput) State() pulumi.StringOutput {
	return o.ApplyT(func(v LookupDatabaseResult) string { return v.State }).(pulumi.StringOutput)
}

// The period in which Cloud Spanner retains all versions of data for the database. This is the same as the value of version_retention_period database option set using UpdateDatabaseDdl. Defaults to 1 hour, if not set.
func (o LookupDatabaseResultOutput) VersionRetentionPeriod() pulumi.StringOutput {
	return o.ApplyT(func(v LookupDatabaseResult) string { return v.VersionRetentionPeriod }).(pulumi.StringOutput)
}

func init() {
	pulumi.RegisterOutputType(LookupDatabaseResultOutput{})
}

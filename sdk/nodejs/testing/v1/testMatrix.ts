// *** WARNING: this file was generated by the Pulumi SDK Generator. ***
// *** Do not edit by hand unless you're certain you know what you are doing! ***

import * as pulumi from "@pulumi/pulumi";
import { input as inputs, output as outputs } from "../../types";
import * as utilities from "../../utilities";

/**
 * Creates and runs a matrix of tests according to the given specifications. Unsupported environments will be returned in the state UNSUPPORTED. A test matrix is limited to use at most 2000 devices in parallel. May return any of the following canonical error codes: - PERMISSION_DENIED - if the user is not authorized to write to project - INVALID_ARGUMENT - if the request is malformed or if the matrix tries to use too many simultaneous devices.
 */
export class TestMatrix extends pulumi.CustomResource {
    /**
     * Get an existing TestMatrix resource's state with the given name, ID, and optional extra
     * properties used to qualify the lookup.
     *
     * @param name The _unique_ name of the resulting resource.
     * @param id The _unique_ provider ID of the resource to lookup.
     * @param opts Optional settings to control the behavior of the CustomResource.
     */
    public static get(name: string, id: pulumi.Input<pulumi.ID>, opts?: pulumi.CustomResourceOptions): TestMatrix {
        return new TestMatrix(name, undefined as any, { ...opts, id: id });
    }

    /** @internal */
    public static readonly __pulumiType = 'google-cloud:testing/v1:TestMatrix';

    /**
     * Returns true if the given object is an instance of TestMatrix.  This is designed to work even
     * when multiple copies of the Pulumi SDK have been loaded into the same process.
     */
    public static isInstance(obj: any): obj is TestMatrix {
        if (obj === undefined || obj === null) {
            return false;
        }
        return obj['__pulumiType'] === TestMatrix.__pulumiType;
    }


    /**
     * Create a TestMatrix resource with the given unique name, arguments, and options.
     *
     * @param name The _unique_ name of the resource.
     * @param args The arguments to use to populate this resource's properties.
     * @param opts A bag of options that control this resource's behavior.
     */
    constructor(name: string, args: TestMatrixArgs, opts?: pulumi.CustomResourceOptions) {
        let inputs: pulumi.Inputs = {};
        opts = opts || {};
        if (!opts.id) {
            if ((!args || args.projectId === undefined) && !opts.urn) {
                throw new Error("Missing required property 'projectId'");
            }
            inputs["clientInfo"] = args ? args.clientInfo : undefined;
            inputs["environmentMatrix"] = args ? args.environmentMatrix : undefined;
            inputs["failFast"] = args ? args.failFast : undefined;
            inputs["flakyTestAttempts"] = args ? args.flakyTestAttempts : undefined;
            inputs["invalidMatrixDetails"] = args ? args.invalidMatrixDetails : undefined;
            inputs["outcomeSummary"] = args ? args.outcomeSummary : undefined;
            inputs["projectId"] = args ? args.projectId : undefined;
            inputs["resultStorage"] = args ? args.resultStorage : undefined;
            inputs["state"] = args ? args.state : undefined;
            inputs["testExecutions"] = args ? args.testExecutions : undefined;
            inputs["testMatrixId"] = args ? args.testMatrixId : undefined;
            inputs["testSpecification"] = args ? args.testSpecification : undefined;
            inputs["timestamp"] = args ? args.timestamp : undefined;
        } else {
        }
        if (!opts.version) {
            opts = pulumi.mergeOptions(opts, { version: utilities.getVersion()});
        }
        super(TestMatrix.__pulumiType, name, inputs, opts);
    }
}

/**
 * The set of arguments for constructing a TestMatrix resource.
 */
export interface TestMatrixArgs {
    /**
     * Information about the client which invoked the test.
     */
    readonly clientInfo?: pulumi.Input<inputs.testing.v1.ClientInfo>;
    /**
     * Required. The devices the tests are being executed on.
     */
    readonly environmentMatrix?: pulumi.Input<inputs.testing.v1.EnvironmentMatrix>;
    /**
     * If true, only a single attempt at most will be made to run each execution/shard in the matrix. Flaky test attempts are not affected. Normally, 2 or more attempts are made if a potential infrastructure issue is detected. This feature is for latency sensitive workloads. The incidence of execution failures may be significantly greater for fail-fast matrices and support is more limited because of that expectation.
     */
    readonly failFast?: pulumi.Input<boolean>;
    /**
     * The number of times a TestExecution should be re-attempted if one or more of its test cases fail for any reason. The maximum number of reruns allowed is 10. Default is 0, which implies no reruns.
     */
    readonly flakyTestAttempts?: pulumi.Input<number>;
    /**
     * Output only. Describes why the matrix is considered invalid. Only useful for matrices in the INVALID state.
     */
    readonly invalidMatrixDetails?: pulumi.Input<string>;
    /**
     * Output Only. The overall outcome of the test. Only set when the test matrix state is FINISHED.
     */
    readonly outcomeSummary?: pulumi.Input<string>;
    /**
     * The cloud project that owns the test matrix.
     */
    readonly projectId: pulumi.Input<string>;
    /**
     * Required. Where the results for the matrix are written.
     */
    readonly resultStorage?: pulumi.Input<inputs.testing.v1.ResultStorage>;
    /**
     * Output only. Indicates the current progress of the test matrix.
     */
    readonly state?: pulumi.Input<string>;
    /**
     * Output only. The list of test executions that the service creates for this matrix.
     */
    readonly testExecutions?: pulumi.Input<pulumi.Input<inputs.testing.v1.TestExecution>[]>;
    /**
     * Output only. Unique id set by the service.
     */
    readonly testMatrixId?: pulumi.Input<string>;
    /**
     * Required. How to run the test.
     */
    readonly testSpecification?: pulumi.Input<inputs.testing.v1.TestSpecification>;
    /**
     * Output only. The time this test matrix was initially created.
     */
    readonly timestamp?: pulumi.Input<string>;
}
